<!DOCTYPE html>
<html>

<head>
	<title>이미지 미리보기</title>
	<style>
		#preview {
			width: 300px;
			height: 300px;
			border: 1px solid #ccc;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		#preview img {
			max-width: 100%;
			max-height: 100%;
		}
	</style>
</head>

<body>
	<input type="file" id="imageUpload" accept="image/*">
	<div id="preview"></div>

	<script>
		document.getElementById('imageUpload').addEventListener('change', function (e) {
			var preview = document.getElementById('preview');
			preview.innerHTML = '';

			var file = e.target.files[0];
			var reader = new FileReader();

			reader.onload = function (e) {
				var image = new Image();
				image.src = e.target.result;
				image.onload = function () {
					var maxWidth = preview.offsetWidth;
					var maxHeight = preview.offsetHeight;
					var width = image.width;
					var height = image.height;

					if (width > height) {
						if (width > maxWidth) {
							height *= maxWidth / width;
							width = maxWidth;
						}
					} else {
						if (height > maxHeight) {
							width *= maxHeight / height;
							height = maxHeight;
						}
					}

					image.width = width;
					image.height = height;
					preview.appendChild(image);
				};
			};

			reader.readAsDataURL(file);
		});
	</script>
</body>

</html>